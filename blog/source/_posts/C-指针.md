---
title: C-指针
date: 2022/3/17
categories: C
tags: C
top_img: https://herozql.oss-cn-beijing.aliyuncs.com/bg_pic/bing_51.jpg
cover: https://herozql.oss-cn-beijing.aliyuncs.com/bg_pic/bing_51.jpg
---





## 1. 指针的概念与定义
### 1.1 指针的概念
- 程序代码和程序要处理的数据是分开储存的
- 一个程序在内存中要占两部分空间，数据部分和指令代码部分
- 存放变量的地址称为指针
- 若`var  = &c` ：则var是存放字符变量地址的变量，称为指针变量，&c为变量c的地址，称为指针
- 所以指针其实就是一个地址，相当于一个链接

### 1.2 指针的定义
- 没有明确指向的指针不会引起编译器出错，但对于指针可能导致无法预料的活隐蔽的灾难性后果
- &运算符只能作用于变量，包括基本类型变量和数组的元素、结构体类型变量或结构体的成员，不能作用于数组名、常量或寄存器变量

## 2. 指针做函数参数
- C在函数调用时参数的传递是按照单项值方式传递的，所以在被调用函数中形参的变化不能改变实参变量的值
- 如书上166页，例8.6所示，尽管x和y的值交换了，但是它们所占用的储存单元也随swap()函数调用结束而释放了，a和b的值并未改变。即交换的是形参的储存空间，调用后被释放
- 如下面代码所示，需要用指针做参数，通过将主调函数中变量的地址传给被调用函数的指针形参：
```c
#include <studio.h>
void swap(int * x, int * y);

int main(void)
{
    int a, b, * p1, * p2;
    a = 10; b = 20; p1 = &a; p2 = &b;
    swap(p1, p2);
    printf(“a = %d, b = %d\n”, a, b);
}

void swap(int * pa, int * pb)
{
    int temp;
    temp = *pa;
    *pa = *pb;
    *pb = temp;
}
```
- 运行结果是：a=20，b=10

## 3. 指针与数组
- 数组名代表了数组的首地址

### 3.1 数组作函数参数
- **数组作函数参数，见书上173页分类讨论**

### 3.2 指针和字符串
- 代码如下：

```c
char * point;
point = “I am a student”;
```
>字符串常量 ”I am a student” 的值就是该字符串在内存中的首地址
>point 是指向字符串“I am a student”的指针，即字符串的首地址赋给了字符指针，因此使一个字符指针指向一个字符串

### 3.3 指针数组
>`int (* ps)[10]` ：ps是一个指针，指向有10个int型元素的数组。它被称为指针数组
>`int * ps[10]` ：ps是一个数组，它含有10个元素，每个元素是一个int指针。它被称为数组指针
>***加括号是指针，不加括号是数组***
- 使用指针数组表示二维数组，见书上182页

## 4. 指针与函数
> `int (*fp)()`：fp是指针，指向int类型的函数。见书上183页
>- 如果把函数名赋给一个指向函数的指针，就可以用该函数型指针来调用函数，其中常用的是将函数名传给另一个函数
>`int *fp()`：fp是一个函数，返回值的类型是指针。见书上185页

## 5. 复杂指针



